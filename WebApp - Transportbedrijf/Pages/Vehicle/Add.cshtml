@page
@model WebApp___Transportbedrijf.Pages.Vehicle.AddModel
@{
    ViewData["Title"] = "Add Vehicle";
}

<h3>Add Vehicle</h3>

<form method="post">

    <div asp-validation-summary="All" class="text-black"></div>

    <div class="form-group">
        <label asp-for="Vehicle.vehicleBrandModel" class="control-label"></label>
        <input asp-for="Vehicle.vehicleBrandModel" class="form-control" />
        <span asp-validation-for="Vehicle.vehicleBrandModel" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Vehicle.VehicleType" class="text-black"></label>

        <select id="vehicleTypeDropdown" asp-for="Vehicle.VehicleType" class="form-control">
            <option value="">-- Selecteer Type --</option>
            <option value="0">Truck</option>
            <option value="1">Taxi</option>
        </select>

        <span asp-validation-for="Vehicle.VehicleType" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Vehicle.LicencePlate" class="control-label"></label>
        <input asp-for="Vehicle.LicencePlate" class="form-control" />
        <span asp-validation-for="Vehicle.LicencePlate" class="text-danger"></span>
    </div>

    <div id="maxLoadField" class="form-group" style="display: none;">
        <label asp-for="Vehicle.MaxLoad" class="control-label"></label>
        <input asp-for="Vehicle.MaxLoad" class="form-control" />
        <span asp-validation-for="Vehicle.MaxLoad" class="text-danger"></span>
    </div>

    <div id="maxPersonsField" class="form-group" style="display: none;">
        <label asp-for="Vehicle.MaxPersons" class="control-label"></label>
        <input asp-for="Vehicle.MaxPersons" class="form-control" />
        <span asp-validation-for="Vehicle.MaxPersons" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Toevoegen</button>
    <a asp-page="/Vehicles/Index" class="btn btn-secondary">Annuleren</a>


</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 1. Elementen selecteren
            const dropdown = document.getElementById('vehicleTypeDropdown');
            const maxLoadField = document.getElementById('maxLoadField');
            const maxPersonsField = document.getElementById('maxPersonsField');

            // 2. Functie om de velden te updaten
            function updateFieldsVisibility() {
                const selectedValue = dropdown.value;

                // Verberg ze standaard eerst allebei
                maxLoadField.style.display = 'none';
                maxPersonsField.style.display = 'none';

                if (selectedValue === '0') {
                    // Toon gewicht voor Truck
                    maxLoadField.style.display = 'block';
                } else if (selectedValue === '1') {
                    // Toon passagiers voor Taxi
                    maxPersonsField.style.display = 'block';
                }
            }

            // 3. Luister naar veranderingen in de dropdown
            dropdown.addEventListener('change', updateFieldsVisibility);

            // 4. Roep de functie aan bij het laden van de pagina
            // (Belangrijk voor initieel gedrag, bijvoorbeeld als er een fout was bij POST)
            updateFieldsVisibility();
        });
    </script>
}

